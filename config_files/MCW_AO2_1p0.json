{
  "version": "1.0",
  "description": "pipeline & analysis JSON for MCW AO2 (modified from AnimalAOSLO json v2p5p13, which was a heavily modified json v0.2 for the OCVL's MEAOSLO because I needed to analyze my data ASAP).",
  "preanalysis": {
    "image_format": "{IDnum}_{Year:.4}{Month:.2}{Day:.2}_{Eye}_({LocX},{LocY})_{FOV_Width}x{FOV_Height}_{VidNum}_{Modality}{:.1}_extract_reg_avg.tif",
    "video_format": "{IDnum}_{Year:.4}{Month:.2}{Day:.2}_{Eye}_({LocX},{LocY})_{FOV_Width}x{FOV_Height}_{VidNum}_{Modality}{:.1}_extract_reg_cropped.avi",
    "mask_format": "{IDnum}_{Year:.4}{Month:.2}{Day:.2}_{Eye}_({LocX},{LocY})_{FOV_Width}x{FOV_Height}_{VidNum}_{Modality}{:.1}_extract_reg_cropped_mask.avi",
    "metadata": {
      "type": "text_file",
      "metadata_format": "{IDnum}_{Year:.4}{Month:.2}{Day:.2}_{Eye}_({LocX},{LocY})_{FOV_Width}x{FOV_Height}_{VidNum}_{Modality}{:.1}_extract_reg_cropped.csv",
      "fields_to_load": {
        "framestamps": "OriginalFrameNumber"
      }
    },
    "recursive_search": false,
    "pipeline_params": {
      "gaus_blur": 1.5,
      "mask_roi": {
        "r": 0,
        "c": 0,
        "width": -1,
        "height": -1
      },
      "alignment_reference_modality": "confocal",
      "modalities": [
        "confocal"
      ],
      "output_folder": "Functional Pipeline",
      "group_by": "({LocX},{LocY})",
      "correct_torsion": true,
      "intra_stack_xform": "affine",
      "inter_stack_xform": "affine",
      "flat_field": true
    }
  },
  "analysis": {
    "image_format": "{IDnum}_{Year:.4}{Month:.2}{Day:.2}_{Eye}_({LocX},{LocY})_{FOV_Width}x{FOV_Height}_{VidNum}_{Modality}_ALL_ACQ_AVG.tif",
    "queryloc_format": "{IDnum}_{Year:.4}{Month:.2}{Day:.2}_{Eye}_({LocX},{LocY})_{FOV_Width}x{FOV_Height}_{VidNum}_{Modality}_ALL_ACQ_AVG_{QueryLoc:s?}coords.csv",
    "video_format": "{IDnum}_{Year:.4}{Month:.2}{Day:.2}_{Eye}_({LocX},{LocY})_{FOV_Width}x{FOV_Height}_{VidNum}_{Modality}_piped.avi",
    "metadata": {
      "type": "text_file",
      "metadata_format": "{IDnum}_{Year:.4}{Month:.2}{Day:.2}_{Eye}_({LocX},{LocY})_{FOV_Width}x{FOV_Height}_{VidNum}_{Modality}_piped.csv",
      "fields_to_load": {
        "framestamps": "FrameStamps",
        "stimulus_sequence": "StimulusOn"
      }
    },
    "recursive_search": false,
    "control": {
      "location": "folder",
      "folder_name": "control"
    },
    "analysis_params": {
      "modalities": [
        "confocal"
      ],
      "output_folder": "Results",
      "output_subfolder": true,
      "output_subfolder_method": "DateTime",
      "output_indiv_stdize_orgs": true,
      "output_sum_pop_orgs": true,
      "output_sum_indiv_orgs": true,
      "normalization": {
        "method": "mean",
        "rescaled": true,
        "rescale_mean": 70,
        "rescale_std": 35
      },
      "segmentation": {
        "refine_to_ref": true,
        "refine_to_vid": false,
        "radius": "auto",
        "shape": "disk",
        "summary": "median",
        "pixelwise": false
      },
      "exclusion_criteria": {
        "type": "stim-relative",
        "units": "frames",
        "start": -5,
        "stop": 5,
        "fraction": 0.5
      },
      "standardization": {
        "method": "mean_sub",
        "type": "stim-relative",
        "units": "frames",
        "start": -30
      },
      "summary": {
        "method": "rms",
        "control": "subtraction",
        "metrics": {
          "type": [
            "amp",
            "logamp",
            "amp_imp_time",
            "halfamp_imp_time",
            "aur"
          ],
          "measured": "stim-relative",
          "units": "time",
          "prestim": [
            -0.5,
            0.0
          ],
          "poststim": [
            0.0,
            1.0
          ]
        },
        "indiv_cutoff": 2
      },
      "gaus_blur": 0.0,
      "mask_roi": {
        "r": 0,
        "c": 0,
        "width": -1,
        "height": -1
      }
    },
    "display_params": {
      "debug": {
        "output_norm_video": false,
        "plot_refine_to_ref": false,
        "plot_refine_to_vid": false,
        "plot_pop_extracted_orgs": false,
        "plot_pop_stdize_orgs": false,
        "plot_indiv_stdize_orgs": false,
        "output_indiv_stdize_orgs": false,
        "stimulus": true,
        "control": true,
        "axes": {
          "xmin": 0,
          "xmax": 6,
          "ymin": -255,
          "ymax": 255,
          "cmap": "viridis",
          "legend": true
        }
      },
      "pop_summary_overlap": {
        "stimulus": true,
        "control": true,
        "relative": true,
        "pooled": true,
        "axes": {
          "xmin": 0,
          "xmax": 4,
          "ymin": 10,
          "ymax": 60,
          "cmap": "plasma",
          "legend": true
        }
      },
      "indiv_summary_overlap": {
        "stimulus": false,
        "control": false,
        "relative": false,
        "axes": {
          "xmin": null,
          "xmax": null,
          "ymin": null,
          "ymax": null,
          "cmap": "plasma"
        }
      },
      "indiv_summary": {
        "histogram": true,
        "cumulative_histogram": true,
        "map_overlay": true,
        "axes": {
          "xmin": null,
          "xstep": null,
          "xmax": null,
          "cmap": "plasma",
          "legend": true
        }
      },
      "saveas": [
        "png",
        "svg"
      ],
      "pause_per_folder": false
    }
  }
}